---
title: 单孔柱状图业务梳理
date: 2020-06-16 14:42:53
categories: 文档
tags: 三维地测系统
mathjax: ture
# password: password
---

### 单孔柱状图业务逻辑

#### 基础功能
##### 生成单孔柱状图

* 地址数据库输入柱状图数据
* 选择数据库
* 选择钻孔名称
* 选择钻孔模版（自定义模版需要开发）
* ~~选择侧斜资料注记方式~~
> * ~~按度注记~~
> * ~~按度分秒注记~~
* 比例尺
* 地层注记类型
> * 地层名称：`界` `系` `统` `组` `段` 
> * 地层代码：`Kz` `Q` `Qh` 
> * 地层注记开关
* 煤层注记类型
> * 煤层名称
> * 煤层代码
> * 地层注记开关
* 标志层注记类型
> * 煤层名称
> * 煤层代码 
> * 地层注记开关
> * 设置需要注记的标志层
* 煤层厚度注记方式
> * 分层注记：单独记录夹矸厚度,用`（）`表示 
> ![单孔柱状图业务梳理](F7A29AFE-2B86-45CC-9CF3-A1B9B83C153C.png)
> * 累加注记：
> ![单孔柱状图业务梳理](85AA114F-8B8E-400E-A6EA-8FA3D9F475DE.png)
> * 累加分层注记：
> ![单孔柱状图业务梳理](4ADDC03C-6581-4A44-8C78-6322B7441B5B.png)
* 测井柱状（控制绘制地层范围
> * 只绘制煤层(其他岩性以无心状态表示)
> * 全部绘制
> * 分层注记
> * 累加注记
* 柱状分割线
> * 用于较薄的煤层美观展示
> * 增加复选框，控制是否绘制
> * 左右分割线设置水平还是倾斜
> ![单孔柱状图业务梳理](4DF3B95B-B46E-4569-BC53-96E08144F5A8.png)
> ![单孔柱状图业务梳理](B2152112-D8AA-4B0C-85B6-8B5C102F09B1.png)

> ![单孔柱状图业务梳理](06263C2F-5942-40C6-AD80-7DC052580233.png)
* 煤层距离不够，可以适当压缩同一煤层距离
* 分层注记设置
> * 设置数值小数点位置：`默认2位`
> * 设置行高最小值：控制出图是文字大小超出边框范围
> ![单孔柱状图业务梳理](ED063ABA-8ECC-4CAB-B40B-F8C587CEE444.png)
* 岩性注记间距：内边距
> * 顶底距离
> * 两侧距离
> ![单孔柱状图业务梳理](16680B32-B3EC-47F6-A41D-13A50CE6D88F.png)

* 柱状与文字部分对齐
> * 选择`柱状与文字部分对齐`，将岩性描述部分按比例分割
> ![单孔柱状图业务梳理](82F9001B-77C5-462C-9F2A-E5C73819CDCA.png)
> * 不选择`柱状与文字部分对齐`,将等分岩性描述的高
> ![单孔柱状图业务梳理](8A763300-17EE-4F55-8C76-F5755B051E29.png)

* 消耗量曲线连成折线
> ![单孔柱状图业务梳理](C3DB789B-1E3F-4083-9BA4-03F3BD92320A.png)
* 标志层列每一行都连线 
> * 每一层都连线或者只在标注的层才连线
> ![单孔柱状图业务梳理](12527DFC-6D21-4509-9EE8-770C1A2F719D.png)

* 同一煤层是采取率取平均值
> * 含有夹矸的煤层，采取率自动取平均值。
* 同一煤层时采长求和
> * 含有夹矸的煤层，采长自动求和。
* <u>岩性填充时，填充符号占满整个格子，不协调调整填充</u>
> * 勾选此项，填充符号会占满整个格子。
> ![单孔柱状图业务梳理](D03F38C6-E548-4C38-9B3C-1A9E5CA34C1A.png)
> * 不勾选时，系统会保证填充符号的完整。
> ![单孔柱状图业务梳理](B4145C94-C072-43F0-B4D6-5C9E5E69C8F5.png)
* <u>反序绘制</u>
> * 当钻孔孔口在下时，根据实际情况绘制钻孔，累深为从大到小。
* <u>封孔按孔径绘制</u>
> * 参照孔径绘制钻孔封孔资料。
* <u>填充封孔</u>
> * 根据封孔材料自动填充封孔。
* <u>采用石油类型符号填充钻孔</u>
> * 采用石油类型符号填充钻孔岩性。

* 选择测井曲线
> * 导入文件：`*.Dat` `*.fld`
> * 设置数值上限额
> ![单孔柱状图业务梳理](814B9C40-4DE2-4567-BE77-19B3A0CFB805.png)
* * 对应曲线名称
> ![单孔柱状图业务梳理](AACB585E-6340-4EBD-B342-F0E0A9ACB411.png)
> ![单孔柱状图业务梳理](698A747D-AE2D-4FB1-8FA2-E588B5E66467.png)

* 查看测井曲线数据

* 查看测井曲线
> ![单孔柱状图业务梳理](18333BA4-BF77-45B8-A72C-35406F0CA4C0.png)
> * 选择曲线类型，显示所有对应数据
> * 设置有效值开始和结束位置进行绘制
> * 设置有效参数范围：`深度` `井径` `密度`等 
> ![单孔柱状图业务梳理](16DFA980-03F9-4615-8174-804B99F5C832.png)
> * 点击`查看`->列出所有符合条件的数据
> * 可以导出文本文件（单根曲线对应数值）
> ![单孔柱状图业务梳理](214C0237-05A7-4E64-845A-FAB3989840C8.png)
 
* 字段设置
> *`增加` `修改` 字段的对应 
> ![单孔柱状图业务梳理](ACEF6312-1D9D-4D20-953F-E1BA9807DB36.png)

> * 曲线设置
> * 如果存在测井曲线字段，则必须添加测井曲线文件
> * 双击曲线修改`最大值` `最小值` `方向是否反向`属性
> ![单孔柱状图业务梳理](6836DED8-4327-490E-95F3-308CAE82FC16.png)

* 缺省值
> * 设置单孔柱状图缺省值

##### 生成测井曲线

![单孔柱状图业务梳理](02BC4617-1EF7-4A2B-B449-6E63BB288123.png)
* 选择测井曲线数据文件
> * `txt文件`或者~~其他任意文件~~
> ![单孔柱状图业务梳理](52DC0904-8C8F-4083-B4EE-B0DF971DCA8C.png)
> 
* 选择数据格式
> * 一般文本数据（如果原始数据被修改过）
> * 表头+测井数据（如果被修改过且包含表头）
> * 原始测井数据（常用）

* 输入比例尺

* ~~是否自动标注曲线最大值最小值~~(3.2版已经去掉)
> * 点击`自动域值`自动剔除所选数据文件中的错误数值。
> * 修改曲线的`标注名称` `颜色`。
> * 显示`最大值` `最小值`
![单孔柱状图业务梳理](25EA68D7-09BE-4E9B-B64F-0972032BF9A7.png)

* 设置文件是否有表头（可以不用设置，自动识别）
> ![单孔柱状图业务梳理](BD28CC69-7999-4A87-B6FA-72DE5122F63C.png)
> ![单孔柱状图业务梳理](61D8FAF6-C8FA-43F8-8D17-83EB9EC9D6A6.png)

* 设置文本分隔符（可以不用设置，自动识别）
* ![单孔柱状图业务梳理](B4228D94-75B3-4AFD-A32A-B3AC8374DA55.png)


* 曲线设置
![单孔柱状图业务梳理](4C66F617-51C8-4B27-8F72-82EECA5FB4D5.png)
> * 选择需要绘制的曲线
> * 设置曲线样式:`实线` `虚线`
> * 绘制方式：`列表绘制` `重叠绘制`
> * 确定生成测井曲线
> * 是否波幅取对数
> * 是否标注对数值
> * 是否标注最大值最小值
> * 设置注记高度：`mm`
> * 曲线宽度：`mm`

##### 生成测井综合成果图

#### 扩展功能

* 测井曲线数据查看
> * 查看坐标点详细信息
> ![单孔柱状图业务梳理](F14EEF7D-E382-4660-9484-19E6A6B1682F.png)

* 柱状图缩短层间距
* 柱状图分幅
> ![单孔柱状图业务梳理](9BF2135E-2802-4C62-99CF-B6FA0D9619CA.png)

* 岩性代码对照表（由数据库接口维护）
> * 没有对照的岩性柱状图将不予显示
> ![单孔柱状图业务梳理](4EF2EF00-B15B-4125-8207-1FD5C5A50F63.png)


#### 丢弃功能

* 曲线标尺与位置
> * ~~给定标尺宽度~~(由AUTO CAD完成)
> * ~~确定曲线位置~~（由AUTO CAD完成)
![单孔柱状图业务梳理](E8252356-1796-4D89-90F7-B3E5AED27F6B.png)

* 测井曲线数据导出至文本
* 测井曲线数据导出至数据库


#### 自定义模版

#### 专业术语