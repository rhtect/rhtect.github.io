---
title: 瑞华地质信息提取工具集
date: 2021-05-27 16:11:42
categories: 文档
tags: 三维地测系统
password: password2
---

## 钻孔台账信息提取工具
### 需求说明
需要将`大钻孔`、`小钻孔`CAD台账数据，识别成EXCEL标准格式。

### 功能描述
#### 大钻孔台账提取
CAD台账大体分为`简易水文` `地层信息` `测井信息` `钻探信息`等几部分。需要将对应的字段一一转换，存储成EXCEL格式。(以下截图是标准模版,实际图纸会有出入)

`简易水文`数据包括`耗水量曲线` `水位曲线`,根据两条曲线的节点与数据表尺获取测量点数值.
![](16250247606369.jpg)


`综合`、`测井`、`钻探`三类数据可能出现三种情况
* 只有钻探
* 钻探+测井
* 综合+钻探+测井
![](16249730087677.jpg)



#### 数据资料
《大钻孔数据结构》《大钻孔》

#### 小钻孔台账提取
CAD台账大体分为A、B、C三个区域，分别用三种颜色标识，成果数据分别对应相应区域。需要将相应区域的数据一一匹配转换，存储成EXCEL格式。数据结构可能不唯一，尽量可以兼容新的表格结构，或者以最小的改动兼容不同结构。
![-w1318](16212220452395.jpg)
![-w1522](16212224246968.jpg)

#### 功能补充
* 单文件多图识别
* B区与A区建立对应关系
* 文件识别过程中遇到多余的元素，只识别标准数据并且提示`XX文件可能包含多余元素`
* 逻辑纠错方式
![-w1632](16233919801313.jpg)


 > 倾角真厚 （参考A区域）
 真厚层厚 = 钻厚层厚 X ｜sin（钻孔倾角）｜  
 > 采取率 （参考B区域）
 钻心长度 / 钻厚层厚 x 100 （四舍六入五取偶） 
 > 进尺判断  （参考C区域）
 1钻厚累计 = 1钻后层厚
 2钻厚累计 = 2钻后层厚 +  1钻厚累计
 n钻厚累计 = n钻后层厚 +  n-1钻厚累计



#### 数据资料
《8222井下小钻孔》

## 地形图数据提取工具
### 需求说明
需要将纸质采掘工程平面图或者CAD版采掘工程平面图中各个元素识别成标准数据格式，首先实现等高线的识别。

### 功能描述
需要通过给定dwg格式的CAD地形图（地形数据包含村庄、小煤窑等数据），提取其中的等高线数据数据包括XYZ坐标，坐标格式X（纬线）、Y（经线）、Z（高度），数据以JSON格式保存为文件，例如：
```
{ 
等高线1：[{x:维度,y:维度,z:高度},{x:维度,y:维度,z:高度},{x:维度,y:维度,z:高度}],
等高线2：[{x:维度,y:维度,z:高度},{x:维度,y:维度,z:高度},{x:维度,y:维度,z:高度}],
 }
```
 
![-w3200](16221024036388.jpg)

### 数据资料
《塔山煤矿井上下对照图》

## 工作面素描图识别工具

### 需求说明
需要将多种类型的CAD素描图关键点、关键线条的坐标识别成标准数据格式。
### 交互方式
1. 手动输入2组图纸坐标，确定范围。
2. 加载煤层底板等高线信息，确定范围（参考：《塔山煤矿井上下对照图》）
3. 加载钻孔信息，确定范围。（参考：《8222井下小钻孔》）
### 功能描述
1. 识别巷道顶底板坐标
    图中`红色`细线条是巷道顶板，`紫色`细线是巷道底板。需要返回巷道顶底板的一组坐标。
2. 识别煤层底板坐标
    图中`黄色`细线条是煤层底板，煤层底板受到地质构造（如断层）的影响会发成位置上的变化，变化的范围已经在构造中标出。需要返回煤层底板的一组坐标。
3. 识别特征对象坐标
    图中`绿色`粗线条画出的是特征构造（如夹矸）等，按照实际发生情况表示。需要返回特征构造的坐标。
4. 识别地质构造（断层、岩墙）坐标
    * 图中`紫色`粗线条画出的是地质构造（如断层）等，按照实际发生情况表示。需要返回特征构造的坐标，断层厚度，倾角等描述信息。
    * 图中`紫色`粗线条方框的是地质构造（如断层）等，按照实际发生情况表示。需要返回特征构造的坐标，断层厚度，倾角等描述信息。
    * 上下两种构造可以相互印证。
5. 识别顶底板探煤厚点坐标。
    图中`蓝色`圆圈的位置是探煤厚点，需要识别探煤厚点的坐标、煤层厚度等描述信息。
6. 识别进尺点坐标。
    图中`红色`圆圈的位置是进尺点，需要识别进尺点的坐标、进尺距离、进尺时间等描述信息。

![-w3200](16220998961771.jpg)
![-w3200](16221069275865.jpg)


![](16221015354268.jpg)

![](16221067865676.jpg)

### 数据资料
《8222素描图》