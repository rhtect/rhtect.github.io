---
title: 辅助运输二期需求文档
date: 2019-09-12 13:39:05
categories: 文档
tags: 辅助运输
mathjax: ture
---

## 基础功能

### 订单系统
#### 服务端

* [ ] <font color="red">查询终端合法状态</font>
* [ ] <font color="red">绑定司机与车辆</font>
* [x] 车队派单后推送到平板
> * [x] 轮询方式（耗电）
> * [ ] 维持心跳主动推送方式
* [x] 行车导航数据
* [x] 收车解除司机与车辆绑定
* [x] 任务结束后修改订单状态（同自动结束任务）


#### 客户端
* [ ] <font color="red">查询终端合法状态</font>
* [ ] <font color="red">获取司机信息</font>
* [ ] <font color="red">绑定司机与车辆</font>
> *  如果之前有绑定的司机 自动替换
* [x] 弹出实时订单
> * [x] 轮询方式（耗电）
> * [ ] 维持心跳被动接收方式
* [x] 出车&拒绝
* [x] 绘制行车导航路径
> * [x] 根据`寻路算法`绘制最优路径
> * [ ] 显示车辆当前位置，并且实时移动
> * [ ] 绘制已走过路径
* [x] 结束任务
* [x] 已完成任务列表
* [x] 已拒绝任务列表
* [x] 未完成任务列表
* [x] 收车解除司机与车辆绑定
> *  回到初始界面
### 视频通话
#### 服务端
* [x] 调度到平板呼叫视频通话
* [x] 平板到调度呼叫视频通话
* [x] 行车记录监控功能
* [ ] 通信信号增加用户管理机制
* [ ] 通信中占线功能
> * [x] 通信呼叫中返回`占线`状态
> * [x] 通信过返回`占线`状态
> * [ ] 需要当前用户管理
#### 客户端
* [x] 调度到平板呼叫视频通话
> * [x]  呼叫过程中断线重连
> * [x]  通话过程中断线重连
* [x] 平板到调度呼叫视频通话
> * [x]  呼叫过程中断线重连
> * [x]  通话过程中断线重连
* [ ] 双向语音对讲通话
> * [ ] 双向呼叫断网重连不稳定
> * [ ] 双向呼叫状态错乱
* [ ] 通话占线功能   
* [ ] 操作台控制APP功能  
> * [x] 通过操作台按键控制APP
> * [x] 通过话筒通话
> * [x] 通过底座的外放
> * [ ] 按键与外网同时工作
* [ ] 通信信号增加用户管理机制
* [ ] 通信中占线功能
> * [x] 通信呼叫中提示`忙线中`
> * [x] 通信过程中提示`忙线中`
> * [ ] 需要当前用户管理

### 车载底座按键功能
#### 客户端
* [x] 呼叫调度 双击F1键
* [x] 打开行车监控 双击F2键
* [x] 出车 长按F1键10秒
* [x] 收车 长按F1键10秒
* [x] 进入菜单 双击F3键
* [x] 方向键
* [x] 确定取消键

### 候车站功能 (王垒)
* [ ] 候车站硬件调试
* [ ] 候车站地点筛选
* [x] 候车站人车筛选
* [x] 候车站路径绘制


### 数据分析统计系统 （孙虎）
* [ ] 用车申请
> * [x] 统计每天的申请情况
> * [ ] 统计每天的执行情况(目前人工统计)
> * [ ] 导出对应数据
* [ ] 车辆运行总里程
> * [x] 按天计算总里程数
> * [x] 每天计算前一天的数据
> * [ ] 自动运行计划任务（凌晨2点自动执行）
> * [ ] 导出对应数据
* [ ] 车辆运行时间
> * [ ] 按天计算车辆运行时间
> * [ ] 按天计算车辆空驶运行时间
> * [ ] 每天计算前一天的数据
> * [ ] 自动运行计划任务（凌晨2点自动执行）
> * [ ] 导出对应数据
* [ ] 司机工作量 （待调研）

### 用车申请APP（优化）
* [ ] 通信接口增加用户身份验证
* [ ] APP后台增加版本统计

### 存在的问题
* [ ] 地面WIFI信号没有覆盖
* [ ] 蓝牙与WIFI信号干扰
* [ ] 蓝牙按键信号与语音信号冲突

---------------------------------

## 扩展功能

### 订单系统
* [ ] `滴滴模式`订单管理
> * [ ] 任务抢单模式
> * [ ] 任务指派模式

### 视频通话
* [ ] 语音广播功能

### 其他功能
* [ ] 领导终端APP
* [ ] 司机终端APP
* [ ] 调度终端APP


---------------------------------

## 边缘功能

### 周边障碍物预警模块

#### 服务端
* [ ] 筛选碰撞消息符合条件的消息 
> * [ ] 筛选障碍物类型
>> * [ ] 固定障碍物：`红绿灯`、`路口`等
>> * [ ] 移动障碍物：`车辆`、`人员`等
> * [ ] 筛选位移范围：  $Range_i \leq Distance \leq Range_j$
> * [ ] 筛选方向（详见`寻路算法`）
> * [ ] 筛选时间范围 $Time \nleq \Delta t$ 
* [ ] 调用`寻路算法`找到当前车辆行驶的路径
> * [ ] 获取附近障碍物轨迹坐标集合
> * [ ] 计算附近障碍物距离锚点（井口）位移
> * [ ] 确认障碍物在与当前车辆的位置关系

#### 客户端
* [ ] 判断行驶方向
* [ ] 判断障碍物前后位置
* [ ] 障碍物距离去抖动：抖动范围：$Range \leq 30cm$
