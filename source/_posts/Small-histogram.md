---
title: 小柱状图业务梳理
date: 2020-06-16 14:42:25
categories: 文档
tags: 三维地测系统
mathjax: ture
# password: password
---

### 小柱状图业务逻辑

#### 基础功能
##### 绘制小柱状
![小柱状图业务梳理](B0078C79-C39A-457D-A8C8-107E5F618D68.png)
* 小柱状图结构列表
> * 实现岩层功能: `增` `删` `改` `查` `移动`
> ![小柱状图业务梳理](DC6CCD69-C634-4195-B326-5A850A95966E.png)
> * `岩性代码` 点击输入地层岩性代码。
> * `地层厚度` 点击输入地层的厚度，单位`米`。
> * `岩石名称` 点击进入`岩性符号选择`对话框选择相应的地层岩性
> ![小柱状图业务梳理](46C3CD72-6C2D-4CB1-9455-AB965B7510B8.png)
> * `岩性代码`与`岩石名称`是一一对应的关系，用户只需选择任何一个。
> * `地层性质` 点击设置地层的性质，默认的有`顶板` `底板`两层，且不能修改和删除。其他可以选择`煤层` `夹矸`。
> ![小柱状图业务梳理](56C2E7B7-E0F7-4A71-9356-13D87FF89452.png)

* 小柱状地层结构
> * `小柱状图结构列表`的数字展现
> * `小柱状地层结构` 与 `小柱状图结构列表`可以相互转换
> * `小柱状地层结构` 与 `小柱状图结构列表`可以合并同类项，例如：`ABBA`会合并成`ABA`展示。
> ![小柱状图业务梳理](34BAA0F0-3D41-4727-A99D-0132C014C5B2.png)
> ![小柱状图业务梳理](1485EFA9-DE9D-434D-828F-A94B8D509346.png)

* 常规设置
![小柱状图业务梳理](EE6A4B67-819B-4609-B3D1-434D99B7E7F7.png)
> * `小柱状比例尺`：设置所需要的小柱状的比例尺。
> * `小柱状宽度(mm)`：设置生成小柱状的宽度。
> * `小柱状线宽(mm)`：设置生成小柱状的划线宽度。
> * `统计煤厚`：选择是否统计煤厚。
> * `绘制分隔线`：选择是否绘制分隔线。
> * **`注记底板标高`**：选择是否注记底板标高，若选择注记则需要输入底板标高值。
> * `注记`：设置小柱状注记的高度、字体、精度及文本到小柱状的位置。
> ![小柱状图业务梳理](1166F783-8210-49A6-9BAA-8CFF8A17D954.png)

* 缓存小柱状参数，增加一键快捷绘制功能

##### 生成煤层小柱状
###### 煤层小柱状设置
![小柱状图业务梳理](B34C8731-FE5D-4209-BEE0-D716BE7E76CB.png)

> * `小柱状间距`：设置小柱状间的距离。当右侧【小柱状位置】处选择【图形边界】时，此处才可以进行设置。
> * `顶底板厚度`：设置提取的煤层小柱状的顶底板的厚度，可以按照实际绘制，也可以给定一个默认值。
> * `煤厚统计及底板标高`：设置小柱状是否统计煤厚、是否绘制分隔线及是否注记底板标高。
> * `注记`：设置小柱状注记的高度、宽度及精度。
> * `是否绘制煤化学表`：选择是否绘制煤化学表。若选择绘制，则需要在下面的窗口中选择相应的模版。
> * `连接数据库v：点击此按钮进行数据库连接。前提是数据库有配置。
> * `煤层名称v：连接数据库后，在此处选择需要绘制柱状图的煤层号。
> * `小柱状位置`：设置要绘制的小柱状的放置位置。可以选择钻孔附近，也可以选择放置图形边界位置。
> * `矿井名称`：若数据库中只有一个矿井名称，此处不可选；若有多个矿井名称，则需要选择。
> * `钻孔或勘探线列表`：选择要绘制的钻孔或勘探线名称。当【小柱状位置】选择【图形边界】的【所有钻孔】时，此处为勘探线列表，为其他选项时，此处为钻孔列表。
> * `钻孔类型`：选择钻孔类型。当小柱状位置选择“图形边界”的【所有钻孔】时，此处可选。
> * `小柱状及煤化学表与钻孔的位置关系`：当小柱状位置选择【钻孔附近】时，此处可设置。
> * `绘制柱状所采用的数据`：设置绘制小柱状时所采用的数据。




